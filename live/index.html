<!DOCTYPE html>
<html>
  <head>
    <link rel="manifest" href="manifest.json" />
    <meta
      name="Description"
      content="HeatSync Labs. Arizona's greatest hackerspace."
    />
    <style type="text/css">
      body {
        background-color: #2c2c29;
        color: #2c2c29;
        font-family: Tahoma;
        font-size: 11px;
        margin: 0;
        padding: 0;
      }

      .open {
        color: green;
        display: inline;
      }

      .closed {
        color: red;
        display: inline;
      }

      #wrapper {
        width: 85%;
        margin: 0 auto;
      }

      #top span {
        display: none;
      }

      #content {
        background-color: #fff;
        padding: 1em;
        font-size: 1.2em;
      }

      .caption {
        background-color: #f3f3f3;
        border: 1px solid #ddd;
        padding: 4px;
        margin: 0 0 0 30px;
        display: inline-block;
      }

      .footer {
        clear: both;
      }

      h1,
      h2,
      h3,
      h4 {
        font-family: Helvetica, Georgia;
        font-size: 24px;
        letter-spacing: -1px;
        margin: 0px 0px 10px;
        border-bottom: 1px solid #dcdcdb;
      }

      h2 {
        font-size: 22px;
      }

      h3 {
        font-size: 20px;
      }

      h4 {
        font-size: 18px;
      }

      canvas {
        display: block;
        margin: 0 auto;
        width: 100%;
        height: 100%;
      }
    </style>
    <meta name="theme-color" content="#f99b0c" />
  </head>

  <body>
    <div id="wrapper">
      <a href="http://www.heatsynclabs.org">
        <img src="/img/logo-light.png" height="116" />
      </a>

      <div id="content">
        <h2>HeatSync Labs Live Webcams</h2>
        <p>
          See if there are people in the lab! <br />The camera views outlines of people in real time, though you may not be able to tell if
          nothing's moving. <br />
          If the cameras are broken, please email
          operations at heatsynclabs dot org and mention "web cams" in the subject line.
        </p>
        <p>
          Nobody here? Check the
          <a href="http://twitter.com/heatsyncstatus">HeatSyncStatus</a> feed.
          See when the next event is scheduled at the
          <a href="http://www.heatsynclabs.org">HeatSync Website</a>.
        </p>

        <div class="caption">
          <canvas
            id="livestream1"
          />
        </div>

        <div class="caption">
          <canvas
            id="livestream2"
          />
        </div>

        <div class="caption">
          <canvas
            id="livestream3"
          />
        </div>

        <div class="caption">
          <canvas
            id="livestream4"
          />
        </div>
        <ul>
          <li>
            doors currently:
            <span id="door_status">
              <i class="icon-spinner icon-spin"></i>
            </span>
          </li>
        </ul>
      </div>
    </div>
    <script src="https://unpkg.com/socket.io-client@4.8.1/dist/socket.io.min.js"></script>
    <script type="module" src="/src/scripts/doors.js"></script>
    <script type="module" src="/src/scripts/matrix.js"></script>
    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", () => {
        doors().then(console.log).catch(console.error);

        const cam1 = new MatrixCam({
          name: 'CAM1',
          width: 1280,
          height: 720,
          backroundImg: '/img/backgrounds/snapshot1.jpg',
          canvas: document.getElementById('livestream1'),
        });
        const cam2 = new MatrixCam({
          name: 'CAM2',
          width: 1280,
          height: 720,
          backroundImg: '/img/backgrounds/snapshot2.jpg',
          canvas: document.getElementById('livestream2'),
        });
        const cam3 = new MatrixCam({
          name: 'CAM3',
          width: 800,
          height: 600,
          backroundImg: '/img/backgrounds/snapshot3.jpg',
          canvas: document.getElementById('livestream3'),
        });
        const cam4 = new MatrixCam({
          name: 'CAM4',
          width: 640,
          height: 360,
          backroundImg: '/img/backgrounds/snapshot4.jpg',
          canvas: document.getElementById('livestream4'),
        });

        const cams = [cam1, cam2, cam3, cam4];

        const matrix = new MatrixLauncher({ io, cams });
        
      });

    </script>
  </body>
</html>
